/*! For license information please see main.2df9bf9b210c52bdc323.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/home/index.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>a});var i=s("./app/components/Canvas/home/media.js"),r=s("./node_modules/ogl/src/core/Transform.js"),h=s("./node_modules/ogl/src/extras/Plane.js"),o=s("./node_modules/lodash/map.js"),l=s.n(o),n=s("../../../../node_modules/gsap/index.js");class a{constructor({gl:t,scene:e,sizes:s}){this.group=new r.Transform,this.sizes=s,this.scene=e,this.gl=t,this.galleryElement=document.querySelector(".home__gallery"),this.mediaElement=document.querySelectorAll(".home__gallery__media__image"),this.createGeometry(),this.createGallery(),this.group.setParent(e),this.x={current:0,target:0,lerp:.1},this.y={current:0,target:0,lerp:.1},this.scrollCurrent={x:0,y:0},this.scroll={x:0,y:0},this.speed={target:0,current:0,lerp:.1},this.show()}createGallery(){this.medias=l()(this.mediaElement,((t,e)=>new i.default({element:t,geometry:this.geometry,index:e,gl:this.gl,scene:this.group,sizes:this.sizes})))}createGeometry(){this.geometry=new h.Plane(this.gl,{heightSegments:20,widthSegments:20})}onResize(t){this.galleryBounds=this.galleryElement.getBoundingClientRect(),this.sizes=t.sizes,this.gallerySizes={height:this.galleryBounds.height/window.innerHeight*this.sizes.height,width:this.galleryBounds.width/window.innerWidth*this.sizes.width},l()(this.medias,(e=>e.onResize(t,this.scroll)))}onTouchDown({x:t,y:e}){this.scrollCurrent.x=this.scroll.x,this.scrollCurrent.y=this.scroll.y}onTouchMove({x:t,y:e}){const s=t.start-t.end,i=e.start-e.end;this.x.target=this.scrollCurrent.x-s,this.y.target=this.scrollCurrent.y-i}onTouchUp({x:t,y:e}){}onWheel({pixelX:t,pixelY:e}){this.x.target+=t,this.y.target+=e}show(){console.log("home show"),l()(this.medias,(t=>t.show()))}hide(){l()(this.medias,(t=>t.hide()))}update(){if(!this.galleryBounds)return;const t=this.x.target-this.x.current,e=this.y.target-this.y.current;this.speed.target=.001*Math.sqrt(t*t+e*e),this.speed.current=n.default.utils.interpolate(this.speed.current,this.speed.target,this.speed.lerp),this.x.current=n.default.utils.interpolate(this.x.current,this.x.target,this.x.lerp),this.y.current=n.default.utils.interpolate(this.y.current,this.y.target,this.y.lerp),this.scroll.x<this.x.current?this.x.direction="right":this.scroll.x>this.x.current&&(this.x.direction="left"),this.scroll.y<this.y.current?this.y.direction="top":this.scroll.y>this.y.current&&(this.y.direction="bottom"),this.scroll.x=this.x.current,this.scroll.y=this.y.current,l()(this.medias,((t,e)=>{const s=t.mesh.scale.x/2;"left"===this.x.direction?t.mesh.position.x+s<.55*-this.sizes.width&&(t.extra.x+=this.gallerySizes.width):"right"===this.x.direction&&t.mesh.position.x-s>.55*this.sizes.width&&(t.extra.x-=this.gallerySizes.width);const i=t.mesh.scale.y/2;"top"===this.y.direction?t.mesh.position.y+i<.55*-this.sizes.height&&(console.log("this element is out of top bounds"),t.extra.y+=this.gallerySizes.height):"bottom"===this.y.direction&&t.mesh.position.y-i>.55*this.sizes.height&&(t.extra.y-=this.gallerySizes.height),t.update(this.scroll,this.speed.current)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(t){t.h=()=>"110cef62697c6aca7530"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi4yZGY5YmY5YjIxMGM1MmJkYzMyMy5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7MldBSWUsTUFBTUEsRUFDbkJDLGFBQVksR0FBQ0MsRUFBRSxNQUFFQyxFQUFLLE1BQUVDLElBQ3RCQyxLQUFLQyxNQUFRLElBQUlDLEVBQUFBLFVBQ2pCRixLQUFLRCxNQUFPQSxFQUNaQyxLQUFLRixNQUFRQSxFQUNiRSxLQUFLSCxHQUFLQSxFQUNWRyxLQUFLRyxlQUFpQkMsU0FBU0MsY0FBYyxrQkFDN0NMLEtBQUtNLGFBQWVGLFNBQVNHLGlCQUFpQixnQ0FFOUNQLEtBQUtRLGlCQUNMUixLQUFLUyxnQkFHTFQsS0FBS0MsTUFBTVMsVUFBVVosR0FFckJFLEtBQUtXLEVBQUcsQ0FDTkMsUUFBUyxFQUNUQyxPQUFRLEVBQ1JDLEtBQU0sSUFFUmQsS0FBS2UsRUFBRyxDQUNOSCxRQUFTLEVBQ1RDLE9BQVEsRUFDUkMsS0FBTSxJQUVSZCxLQUFLZ0IsY0FBZSxDQUNsQkwsRUFBRyxFQUNISSxFQUFHLEdBRUxmLEtBQUtpQixPQUFRLENBQ1hOLEVBQUcsRUFDSEksRUFBRyxHQUVMZixLQUFLa0IsTUFBUSxDQUNYTCxPQUFRLEVBQ1JELFFBQVMsRUFDVEUsS0FBTSxJQUVSZCxLQUFLbUIsTUFFUCxDQUVBVixnQkFDRVQsS0FBS29CLE9BQVNDLElBQUlyQixLQUFLTSxjQUFjLENBQUNnQixFQUFTQyxJQUN0QyxJQUFJQyxFQUFBQSxRQUFNLENBQ2ZGLFVBQ0FHLFNBQVV6QixLQUFLeUIsU0FDZkYsUUFDQTFCLEdBQUlHLEtBQUtILEdBQ1RDLE1BQU9FLEtBQUtDLE1BQ1pGLE1BQU9DLEtBQUtELFNBR2xCLENBQ0FTLGlCQUNFUixLQUFLeUIsU0FBVyxJQUFJQyxFQUFBQSxNQUFNMUIsS0FBS0gsR0FBRyxDQUNoQzhCLGVBQWdCLEdBQ2hCQyxjQUFlLElBRW5CLENBSUFDLFNBQVNDLEdBRVA5QixLQUFLK0IsY0FBZ0IvQixLQUFLRyxlQUFlNkIsd0JBQ3pDaEMsS0FBS0QsTUFBUStCLEVBQU0vQixNQUNuQkMsS0FBS2lDLGFBQWUsQ0FDbEJDLE9BQVFsQyxLQUFLK0IsY0FBY0csT0FBU0MsT0FBT0MsWUFBY3BDLEtBQUtELE1BQU1tQyxPQUNwRUcsTUFBT3JDLEtBQUsrQixjQUFjTSxNQUFRRixPQUFPRyxXQUFhdEMsS0FBS0QsTUFBTXNDLE9BS25FaEIsSUFBSXJCLEtBQUtvQixRQUFRbUIsR0FBU0EsRUFBTVYsU0FBU0MsRUFBTzlCLEtBQUtpQixTQUV2RCxDQUVBdUIsYUFBWSxFQUFDN0IsRUFBQyxFQUFDSSxJQUViZixLQUFLZ0IsY0FBY0wsRUFBSVgsS0FBS2lCLE9BQU9OLEVBQ25DWCxLQUFLZ0IsY0FBY0QsRUFBSWYsS0FBS2lCLE9BQU9GLENBQ3JDLENBRUEwQixhQUFZLEVBQUM5QixFQUFDLEVBQUNJLElBQ2IsTUFBTTJCLEVBQVkvQixFQUFFZ0MsTUFBUWhDLEVBQUVpQyxJQUN4QkMsRUFBWTlCLEVBQUU0QixNQUFRNUIsRUFBRTZCLElBRTlCNUMsS0FBS1csRUFBRUUsT0FBU2IsS0FBS2dCLGNBQWNMLEVBQUkrQixFQUN2QzFDLEtBQUtlLEVBQUVGLE9BQVNiLEtBQUtnQixjQUFjRCxFQUFJOEIsQ0FDekMsQ0FFQUMsV0FBVSxFQUFDbkMsRUFBQyxFQUFDSSxJQUViLENBQ0FnQyxTQUFRLE9BQUNDLEVBQU0sT0FBQ0MsSUFDZGpELEtBQUtXLEVBQUVFLFFBQVVtQyxFQUNqQmhELEtBQUtlLEVBQUVGLFFBQVVvQyxDQUNuQixDQUVBOUIsT0FDRStCLFFBQVFDLElBQUksYUFDWjlCLElBQUlyQixLQUFLb0IsUUFBUW1CLEdBQVNBLEVBQU1wQixRQUNsQyxDQUNBaUMsT0FDRS9CLElBQUlyQixLQUFLb0IsUUFBUW1CLEdBQVNBLEVBQU1hLFFBQ2xDLENBSUFDLFNBQ0UsSUFBSXJELEtBQUsrQixjQUFlLE9BRXhCLE1BQU11QixFQUFJdEQsS0FBS1csRUFBRUUsT0FBU2IsS0FBS1csRUFBRUMsUUFDM0IyQyxFQUFJdkQsS0FBS2UsRUFBRUYsT0FBU2IsS0FBS2UsRUFBRUgsUUFFakNaLEtBQUtrQixNQUFNTCxPQUFvQyxLQUEzQjJDLEtBQUtDLEtBQU1ILEVBQUdBLEVBQUlDLEVBQUlBLEdBQzFDdkQsS0FBS2tCLE1BQU1OLFFBQVU4QyxFQUFBQSxRQUFBQSxNQUFBQSxZQUF1QjFELEtBQUtrQixNQUFNTixRQUFTWixLQUFLa0IsTUFBTUwsT0FBUWIsS0FBS2tCLE1BQU1KLE1BRzlGZCxLQUFLVyxFQUFFQyxRQUFVOEMsRUFBQUEsUUFBQUEsTUFBQUEsWUFBdUIxRCxLQUFLVyxFQUFFQyxRQUFTWixLQUFLVyxFQUFFRSxPQUFRYixLQUFLVyxFQUFFRyxNQUM5RWQsS0FBS2UsRUFBRUgsUUFBVThDLEVBQUFBLFFBQUFBLE1BQUFBLFlBQXVCMUQsS0FBS2UsRUFBRUgsUUFBU1osS0FBS2UsRUFBRUYsT0FBUWIsS0FBS2UsRUFBRUQsTUFFM0VkLEtBQUtpQixPQUFPTixFQUFJWCxLQUFLVyxFQUFFQyxRQUN4QlosS0FBS1csRUFBRWdELFVBQVksUUFDWjNELEtBQUtpQixPQUFPTixFQUFJWCxLQUFLVyxFQUFFQyxVQUM5QlosS0FBS1csRUFBRWdELFVBQVksUUFHbEIzRCxLQUFLaUIsT0FBT0YsRUFBSWYsS0FBS2UsRUFBRUgsUUFDeEJaLEtBQUtlLEVBQUU0QyxVQUFZLE1BQ1ozRCxLQUFLaUIsT0FBT0YsRUFBSWYsS0FBS2UsRUFBRUgsVUFDOUJaLEtBQUtlLEVBQUU0QyxVQUFZLFVBSXJCM0QsS0FBS2lCLE9BQU9OLEVBQUlYLEtBQUtXLEVBQUVDLFFBQ3ZCWixLQUFLaUIsT0FBT0YsRUFBSWYsS0FBS2UsRUFBRUgsUUFLdkJTLElBQUlyQixLQUFLb0IsUUFBUSxDQUFDbUIsRUFBT2hCLEtBRXZCLE1BQU1xQyxFQUFTckIsRUFBTXNCLEtBQUtDLE1BQU1uRCxFQUFJLEVBQ1osU0FBckJYLEtBQUtXLEVBQUVnRCxVQUNFcEIsRUFBTXNCLEtBQUtFLFNBQVNwRCxFQUFJaUQsRUFDUixLQUFqQjVELEtBQUtELE1BQU1zQyxRQUNsQkUsRUFBTXlCLE1BQU1yRCxHQUFLWCxLQUFLaUMsYUFBYUksT0FHVixVQUFyQnJDLEtBQUtXLEVBQUVnRCxXQUNIcEIsRUFBTXNCLEtBQUtFLFNBQVNwRCxFQUFJaUQsRUFDUixJQUFqQjVELEtBQUtELE1BQU1zQyxRQUNsQkUsRUFBTXlCLE1BQU1yRCxHQUFLWCxLQUFLaUMsYUFBYUksT0FHckMsTUFBTTRCLEVBQVMxQixFQUFNc0IsS0FBS0MsTUFBTS9DLEVBQUksRUFFWixRQUFyQmYsS0FBS2UsRUFBRTRDLFVBQ0VwQixFQUFNc0IsS0FBS0UsU0FBU2hELEVBQUlrRCxFQUNQLEtBQWxCakUsS0FBS0QsTUFBTW1DLFNBQ2xCZ0IsUUFBUUMsSUFBSSxxQ0FDWlosRUFBTXlCLE1BQU1qRCxHQUFLZixLQUFLaUMsYUFBYUMsUUFHVixXQUFyQmxDLEtBQUtlLEVBQUU0QyxXQUNIcEIsRUFBTXNCLEtBQUtFLFNBQVNoRCxFQUFJa0QsRUFDUixJQUFsQmpFLEtBQUtELE1BQU1tQyxTQUNuQkssRUFBTXlCLE1BQU1qRCxHQUFLZixLQUFLaUMsYUFBYUMsUUFHdkNLLEVBQU1jLE9BQU9yRCxLQUFLaUIsT0FBUWpCLEtBQUtrQixNQUFNTixRQUFRLEdBRWpELENBRUFzRCxVQUNFbEUsS0FBS0YsTUFBTXFFLFlBQVluRSxLQUFLQyxNQUM5QixrQkN0TEZtRSxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL2hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZmxvZW1hL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWVkaWEgZnJvbSAnLi9tZWRpYSdcbmltcG9ydCB7IFBsYW5lLCBUcmFuc2Zvcm0gfSBmcm9tICdvZ2wnXG5pbXBvcnQgbWFwIGZyb20gJ2xvZGFzaC9tYXAnXG5pbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZXtcbiAgY29uc3RydWN0b3Ioe2dsLCBzY2VuZSwgc2l6ZXN9KXtcbiAgICB0aGlzLmdyb3VwID0gbmV3IFRyYW5zZm9ybSgpXG4gICAgdGhpcy5zaXplcyA9c2l6ZXNcbiAgICB0aGlzLnNjZW5lID0gc2NlbmVcbiAgICB0aGlzLmdsID0gZ2xcbiAgICB0aGlzLmdhbGxlcnlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2dhbGxlcnknKVxuICAgIHRoaXMubWVkaWFFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvbWVfX2dhbGxlcnlfX21lZGlhX19pbWFnZScpXG5cbiAgICB0aGlzLmNyZWF0ZUdlb21ldHJ5KClcbiAgICB0aGlzLmNyZWF0ZUdhbGxlcnkoKVxuXG5cbiAgICB0aGlzLmdyb3VwLnNldFBhcmVudChzY2VuZSlcblxuICAgIHRoaXMueCA9e1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIGxlcnA6IDAuMVxuICAgIH1cbiAgICB0aGlzLnkgPXtcbiAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICB0YXJnZXQ6IDAsXG4gICAgICBsZXJwOiAwLjFcbiAgICB9XG4gICAgdGhpcy5zY3JvbGxDdXJyZW50ID17XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICB9XG4gICAgdGhpcy5zY3JvbGwgPXtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfVxuICAgIHRoaXMuc3BlZWQgPSB7XG4gICAgICB0YXJnZXQ6IDAsXG4gICAgICBjdXJyZW50OiAwLFxuICAgICAgbGVycDogMC4xLFxuICAgIH1cbiAgICB0aGlzLnNob3coKVxuXG4gIH1cblxuICBjcmVhdGVHYWxsZXJ5KCl7XG4gICAgdGhpcy5tZWRpYXMgPSBtYXAodGhpcy5tZWRpYUVsZW1lbnQsIChlbGVtZW50LCBpbmRleCkgPT57XG4gICAgICByZXR1cm4gbmV3IE1lZGlhKHtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvbWV0cnksXG4gICAgICAgIGluZGV4LFxuICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgc2NlbmU6IHRoaXMuZ3JvdXAsXG4gICAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbiAgY3JlYXRlR2VvbWV0cnkoKXtcbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wse1xuICAgICAgaGVpZ2h0U2VnbWVudHM6IDIwLFxuICAgICAgd2lkdGhTZWdtZW50czogMjBcbiAgICB9KVxuICB9XG5cbiAgLy8gIEVWRU5UU1xuXG4gIG9uUmVzaXplKGV2ZW50KXtcblxuICAgIHRoaXMuZ2FsbGVyeUJvdW5kcyA9IHRoaXMuZ2FsbGVyeUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB0aGlzLnNpemVzID0gZXZlbnQuc2l6ZXNcbiAgICB0aGlzLmdhbGxlcnlTaXplcyA9IHtcbiAgICAgIGhlaWdodDogdGhpcy5nYWxsZXJ5Qm91bmRzLmhlaWdodCAvIHdpbmRvdy5pbm5lckhlaWdodCAqIHRoaXMuc2l6ZXMuaGVpZ2h0LFxuICAgICAgd2lkdGg6IHRoaXMuZ2FsbGVyeUJvdW5kcy53aWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoICogdGhpcy5zaXplcy53aWR0aFxuXG4gICAgfVxuICAgIC8vIHRoaXMuc2Nyb2xsLnggPSB0aGlzLnRhcmdldC54ID0gMFxuICAgIC8vIHRoaXMuc2Nyb2xsLnkgPSB0aGlzLnRhcmdldC55ID0gMFxuICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEub25SZXNpemUoZXZlbnQsIHRoaXMuc2Nyb2xsKSlcblxuICB9XG5cbiAgb25Ub3VjaERvd24oe3gseX0pe1xuXG4gICAgdGhpcy5zY3JvbGxDdXJyZW50LnggPSB0aGlzLnNjcm9sbC54XG4gICAgdGhpcy5zY3JvbGxDdXJyZW50LnkgPSB0aGlzLnNjcm9sbC55XG4gIH1cblxuICBvblRvdWNoTW92ZSh7eCx5fSl7XG4gICAgY29uc3QgeERpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG4gICAgY29uc3QgeURpc3RhbmNlID0geS5zdGFydCAtIHkuZW5kXG5cbiAgICB0aGlzLngudGFyZ2V0ID0gdGhpcy5zY3JvbGxDdXJyZW50LnggLSB4RGlzdGFuY2VcbiAgICB0aGlzLnkudGFyZ2V0ID0gdGhpcy5zY3JvbGxDdXJyZW50LnkgLSB5RGlzdGFuY2VcbiAgfVxuXG4gIG9uVG91Y2hVcCh7eCx5fSl7XG5cbiAgfVxuICBvbldoZWVsKHtwaXhlbFgscGl4ZWxZfSl7XG4gICAgdGhpcy54LnRhcmdldCArPSBwaXhlbFhcbiAgICB0aGlzLnkudGFyZ2V0ICs9IHBpeGVsWVxuICB9XG4gICAvLyBBbmltYXRpb25zXG4gIHNob3coKXtcbiAgICBjb25zb2xlLmxvZyhcImhvbWUgc2hvd1wiKVxuICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuc2hvdygpKVxuICB9XG4gIGhpZGUoKXtcbiAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLmhpZGUoKSlcbiAgfVxuXG5cbiAgLy8gVXBkYXRlXG4gIHVwZGF0ZSgpe1xuICAgIGlmKCF0aGlzLmdhbGxlcnlCb3VuZHMpIHJldHVyblxuXG4gICAgY29uc3QgYSA9IHRoaXMueC50YXJnZXQgLSB0aGlzLnguY3VycmVudFxuICAgIGNvbnN0IGIgPSB0aGlzLnkudGFyZ2V0IC0gdGhpcy55LmN1cnJlbnRcblxuICAgIHRoaXMuc3BlZWQudGFyZ2V0ID0gTWF0aC5zcXJ0KCBhKiBhICsgYiAqIGIpICogMC4wMDFcbiAgICB0aGlzLnNwZWVkLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc3BlZWQuY3VycmVudCwgdGhpcy5zcGVlZC50YXJnZXQsIHRoaXMuc3BlZWQubGVycClcblxuXG4gICAgdGhpcy54LmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMueC5jdXJyZW50LCB0aGlzLngudGFyZ2V0LCB0aGlzLngubGVycClcbiAgICB0aGlzLnkuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy55LmN1cnJlbnQsIHRoaXMueS50YXJnZXQsIHRoaXMueS5sZXJwKVxuXG4gICAgaWYodGhpcy5zY3JvbGwueCA8IHRoaXMueC5jdXJyZW50KXtcbiAgICAgIHRoaXMueC5kaXJlY3Rpb24gPSAncmlnaHQnXG4gICAgfWVsc2UgaWYodGhpcy5zY3JvbGwueCA+IHRoaXMueC5jdXJyZW50KXtcbiAgICAgIHRoaXMueC5kaXJlY3Rpb24gPSAnbGVmdCdcbiAgICB9XG5cbiAgICBpZih0aGlzLnNjcm9sbC55IDwgdGhpcy55LmN1cnJlbnQpe1xuICAgICAgdGhpcy55LmRpcmVjdGlvbiA9ICd0b3AnXG4gICAgfWVsc2UgaWYodGhpcy5zY3JvbGwueSA+IHRoaXMueS5jdXJyZW50KXtcbiAgICAgIHRoaXMueS5kaXJlY3Rpb24gPSAnYm90dG9tJ1xuICAgIH1cblxuXG4gICAgdGhpcy5zY3JvbGwueCA9IHRoaXMueC5jdXJyZW50XG4gICAgdGhpcy5zY3JvbGwueSA9IHRoaXMueS5jdXJyZW50XG5cblxuXG5cbiAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcblxuICAgICAgY29uc3Qgc2NhbGVYID0gbWVkaWEubWVzaC5zY2FsZS54IC8gMlxuICAgICAgaWYodGhpcy54LmRpcmVjdGlvbiA9PT0gJ2xlZnQnKXtcbiAgICAgICAgY29uc3QgeCA9IG1lZGlhLm1lc2gucG9zaXRpb24ueCArIHNjYWxlWFxuICAgICAgICBpZiggeCA8IC10aGlzLnNpemVzLndpZHRoKi41NSl7XG4gICAgICAgICAgbWVkaWEuZXh0cmEueCArPSB0aGlzLmdhbGxlcnlTaXplcy53aWR0aFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmKHRoaXMueC5kaXJlY3Rpb24gPT09ICdyaWdodCcpe1xuICAgICAgICBjb25zdCB4ID0gbWVkaWEubWVzaC5wb3NpdGlvbi54IC0gc2NhbGVYXG4gICAgICAgIGlmKCB4ID4gKHRoaXMuc2l6ZXMud2lkdGgqLjU1KSl7XG4gICAgICAgICAgbWVkaWEuZXh0cmEueCAtPSB0aGlzLmdhbGxlcnlTaXplcy53aWR0aFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAgIGNvbnN0IHNjYWxlWSA9IG1lZGlhLm1lc2guc2NhbGUueSAvIDJcblxuICAgICAgICBpZih0aGlzLnkuZGlyZWN0aW9uID09PSAndG9wJyl7XG4gICAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSArIHNjYWxlWVxuICAgICAgICAgIGlmKCB5IDwgLXRoaXMuc2l6ZXMuaGVpZ2h0Ki41NSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcyBlbGVtZW50IGlzIG91dCBvZiB0b3AgYm91bmRzJylcbiAgICAgICAgICAgIG1lZGlhLmV4dHJhLnkgKz0gdGhpcy5nYWxsZXJ5U2l6ZXMuaGVpZ2h0XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodGhpcy55LmRpcmVjdGlvbiA9PT0gJ2JvdHRvbScpe1xuICAgICAgICAgIGNvbnN0IHkgPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnkgLSBzY2FsZVlcbiAgICAgICAgICBpZih5ID4gKHRoaXMuc2l6ZXMuaGVpZ2h0Ki41NSkpe1xuICAgICAgICAgIG1lZGlhLmV4dHJhLnkgLT0gdGhpcy5nYWxsZXJ5U2l6ZXMuaGVpZ2h0XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwsIHRoaXMuc3BlZWQuY3VycmVudClcbiAgICB9KVxuICB9XG4gIC8vIERlc3Ryb3l5XG4gIGRlc3Ryb3koKXtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApXG4gIH1cbn0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCIxMTBjZWY2MjY5N2M2YWNhNzUzMFwiKSJdLCJuYW1lcyI6WyJIb21lIiwiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJ0aGlzIiwiZ3JvdXAiLCJUcmFuc2Zvcm0iLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lZGlhRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjcmVhdGVHZW9tZXRyeSIsImNyZWF0ZUdhbGxlcnkiLCJzZXRQYXJlbnQiLCJ4IiwiY3VycmVudCIsInRhcmdldCIsImxlcnAiLCJ5Iiwic2Nyb2xsQ3VycmVudCIsInNjcm9sbCIsInNwZWVkIiwic2hvdyIsIm1lZGlhcyIsIm1hcCIsImVsZW1lbnQiLCJpbmRleCIsIk1lZGlhIiwiZ2VvbWV0cnkiLCJQbGFuZSIsImhlaWdodFNlZ21lbnRzIiwid2lkdGhTZWdtZW50cyIsIm9uUmVzaXplIiwiZXZlbnQiLCJnYWxsZXJ5Qm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2FsbGVyeVNpemVzIiwiaGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJtZWRpYSIsIm9uVG91Y2hEb3duIiwib25Ub3VjaE1vdmUiLCJ4RGlzdGFuY2UiLCJzdGFydCIsImVuZCIsInlEaXN0YW5jZSIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJwaXhlbFgiLCJwaXhlbFkiLCJjb25zb2xlIiwibG9nIiwiaGlkZSIsInVwZGF0ZSIsImEiLCJiIiwiTWF0aCIsInNxcnQiLCJHU0FQIiwiZGlyZWN0aW9uIiwic2NhbGVYIiwibWVzaCIsInNjYWxlIiwicG9zaXRpb24iLCJleHRyYSIsInNjYWxlWSIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==